<template lang="pug">
svg(version="1.1" id="Features-SVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 2005.4 777" xml:space="preserve")
	defs
		radialGradient(id="Features-innerGradient" cx="430.5514" cy="426.0181" r="315.285" gradientTransform="matrix(2.8565 -0.5119 1.0216 1.739 -364.7661 -340.7328)" gradientUnits="userSpaceOnUse")
			stop(offset="0" stop-color="#00C838" stop-opacity="0.2")
			stop(offset="1" stop-color="#00C838" stop-opacity="0")

		radialGradient(id="Features-bottomGradient" cx="279.3484" cy="483.3498" r="459.4102" gradientTransform="matrix(2.8947 -0.4418 0.494 0.9873 -202.5029 -91.6635)" gradientUnits="userSpaceOnUse")
			stop(offset="0" stop-color="#00C838" )
			stop(offset="1" stop-color="#00C838" stop-opacity="0")

		linearGradient(id="Features-rightGradient" gradientUnits="userSpaceOnUse" x1="1640.8595" y1="373.64" x2="2001.5594" y2="373.64" gradientTransform="matrix(1 0 0 -1 0 763.7801)")
			stop(offset="0" stop-color="#FFFFFF" stop-opacity="0")
			stop(offset="1" stop-color="#FFFFFF")

		linearGradient(id="Features-dropletLineGradient" gradientUnits="userSpaceOnUse" x1="977.4597" y1="777.3409" x2="977.4597" y2="510.8409")
			stop(offset="0" stop-color="#00C838" stop-opacity="0")
			stop(offset="1" stop-color="#00C838" )

		linearGradien( id="Features-leftGradient" gradientUnits="userSpaceOnUse" x1="1.3595" y1="373.64" x2="362.0595" y2="373.64" gradientTransform="matrix(1 0 0 -1 0 763.7801)")
			stop(offset="0" stop-color="#FFFFFF" stop-opacity="0")
			stop(offset="1" stop-color="#FFFFFF" stop-opacity="0")
	g(id="Gradient_Wave_Fill")
		g(class="Features-gradientGroup Features-gradientGroup1")
			path(class="Features-bottomGradientShape" d="M1917.4,109.1c-45.4,45.3-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136c-82,0-106,160-193,160 c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32s-62-41-140-41c-103,0-143,98-196,98c-40,0-39-30-72-30 c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9c-39.5,9.1-43.1,65.6-91,69 c-42,3-43.6-30-69.8-30l-0.2,64h1999v-711C1998.4,65.3,1961,65.6,1917.4,109.1z")
			path(class="Features-innerGradientShape" d="M1916.4,109.1c-45.4,45.3-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136c-82,0-106,160-193,160 c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32c-51,0-62-41-140-41c-103,0-143,98-196,98 c-40,0-39-30-72-30c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9 c-39.5,9.1-43.1,65.6-91,69c-42,3-43.6-30-69.8-30l-0.2,64h2000v-711C1998.4,65.3,1960,65.6,1916.4,109.1z")
		g(class="Features-gradientGroup Features-gradientGroup2")
			path(class="Features-bottomGradientShape" d="M1917.4,109.1c-45.4,45.3-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136c-82,0-106,160-193,160 c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32s-62-41-140-41c-103,0-143,98-196,98c-40,0-39-30-72-30 c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9c-39.5,9.1-43.1,65.6-91,69 c-42,3-43.6-30-69.8-30l-0.2,64h1999v-711C1998.4,65.3,1961,65.6,1917.4,109.1z")
			path(class="Features-innerGradientShape" d="M1916.4,109.1c-45.4,45.3-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136c-82,0-106,160-193,160 c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32c-51,0-62-41-140-41c-103,0-143,98-196,98 c-40,0-39-30-72-30c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9 c-39.5,9.1-43.1,65.6-91,69c-42,3-43.6-30-69.8-30l-0.2,64h2000v-711C1998.4,65.3,1960,65.6,1916.4,109.1z")
	g(id="Background_Dotted_Wave")
		path(class="Features-dottedWaveShape" d="M1.6,748.4c95.2,0,78.8-77,147.3-88c37-5.9,58,22,90.7,22c59,0,78.4-145.9,121.4-145.9 c42,0,71.2,162,125.6,162c50,0,55-104,87-104c33,0,32,30.3,72,30.3c53,0,83.1-88.4,166.5-88.4c80.1,0,99.4,84.1,148.5,97.7 c52,14.4,94-43.2,137-43.2s49,31.4,92,31.4c63,0,76-113.3,141-133.2c43-13.2,62,19.6,99,19.6c87,0,111-182.5,193-182.5 c59,0,71.2-202.3,136-217.2c46.8-10.7,89.8,13.3,136.8-29.7c44.8-41,68.4-64,106.2-64")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-1")
		path(class="Features-blueStroke" d="M222.9,603.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S222.9,607,222.9,603.2z")
		line(class="Features-dropletLine" x1="229.7" y1="609.6" x2="229.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-2")
		path(class="Features-blueStroke" d="M480.9,625.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S480.9,629,480.9,625.2z")
		line(class="Features-dropletLine" x1="487.7" y1="635.7" x2="487.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-3")
		path(class="Features-blueStroke" d="M644.9,569.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S644.9,573,644.9,569.2z")
		line(class="Features-dropletLine" x1="651.7" y1="582.6" x2="651.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-4")
		path(class="Features-blueStroke" d="M970.7,504.5c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9 C973.9,511.4,970.7,508.3,970.7,504.5z")
		line(class="Features-dropletLine" x1="977.5" y1="511.6" x2="977.5" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-5")
		path(class="Features-blueStroke" d="M1189.9,545.1c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S1189.9,549,1189.9,545.1z")
		line(class="Features-dropletLine" x1="1196.7" y1="552.3" x2="1196.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-6")
		path(class="Features-blueStroke" d="M1421.9,426.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S1421.9,430,1421.9,426.2z")
		line(class="Features-dropletLine" x1="1428.7" y1="432.6" x2="1428.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-7")
		path(class="Features-blueStroke" d="M1487.9,305.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S1487.9,309,1487.9,305.2z")
		line(class="Features-dropletLine" x1="1494.7" y1="318.6" x2="1494.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-8")
		path(class="Features-blueStroke" d="M1633.9,154.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S1633.9,158,1633.9,154.2z")
		line(class="Features-dropletLine" x1="1640.7" y1="167.6" x2="1640.7" y2="776.6")
	g(class="Features-dropletLineGroup" id="Features-dropletLine-9")
		path(class="Features-blueStroke" d="M1851.7,60.2c0-5.2,6.9-10.7,6.9-10.7s6.9,5.7,6.9,10.7c0,3.8-3.1,6.9-6.9,6.9S1851.7,64.1,1851.7,60.2z")
		line(class="Features-dropletLine" x1="1858.5" y1="73.6" x2="1858.5" y2="776.6")
	g(id="Features-whiteWave")
		path(class="Features-whiteWaveLine" d="M2001.6,65.4c0,0-39.8-1.6-85.2,43.7s-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136 c-82,0-106,160-193,160c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32c-51,0-62-41-140-41 c-103,0-143,98-196,98c-40,0-39-30-72-30c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9 c-39.5,9.1-43.1,65.6-91,69c-42,3-43.6-30-69.8-30")
	g( id="Features-blueLine")
		path(class="Features-blueStroke" d="M2001.6,65.4c0,0-39.8-1.6-85.2,43.7s-57.8,106.8-150,126.3c-85.6,18.1-84.8,136-143.8,136 c-82,0-106,160-193,160c-37,0-41-22-91-22c-68,0-86,81-149,81c-43,0-49-27-92-27s-65,32-116,32c-51,0-62-41-140-41 c-103,0-143,98-196,98c-40,0-39-30-72-30c-32,0-37,37-87,37c-54.3,0-81-68-123-68c-43,0-65.3,85.3-124,91c-41.2,4-51.2-15-77.2-9 c-39.5,9.1-43.1,65.6-91,69c-42,3-43.6-30-69.8-30")
			animate(attributeName="stroke-dasharray" values="0;2400" begin="0.5s" dur="1.5s")
	g(id="Features-dots")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="3.6")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="3.6")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="3.6")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
		circle(class="Features-dot" cx="0" cy="0" r="3.6")
		circle(class="Features-dot" cx="0" cy="0" r="2.5")
	g(id="Features-gradientBorders")
		rect(x="1.4" y="3.9" class="Features-leftGradientShape" width="360.7" height="772.5")
		rect(x="1640.9" y="3.9" class="Features-rightGradientShape" width="360.7" height="772.5")
</template>

<script>
	import { gsap } from "gsap/all";
	import CustomEase from "gsap/CustomEase";
	import MotionPathPlugin from 'gsap/MotionPathPlugin'

	export default {
		mounted() {
			this.$_mobile_screen_bg_animate()
		},
		methods: {
			$_mobile_screen_bg_animate(){
				gsap.registerPlugin(CustomEase, MotionPathPlugin);
				function forEach(array, callback, scope) {
					for (let i = 0; i < array.length; i++) {
						callback.call(scope, i, array[i]); // passes back stuff we need
					}
				}
				function randomIntFromInterval(min,max) {
					return Math.floor(Math.random()*(max - min + 1) + min);
				}

				const graphPath = [
					{"x":1.5999999999999233,"y":712.4},
					{"x":27.79999999999992,"y":712.4},
					{"x":29.39999999999992,"y":745.4},
					{"x":71.39999999999992,"y":742.4},
					{"x":119.29999999999993,"y":739},
					{"x":122.89999999999992,"y":682.5},
					{"x":162.39999999999992,"y":673.4},
					{"x":188.39999999999992,"y":667.4},
					{"x":198.39999999999992,"y":686.4},
					{"x":239.5999999999999,"y":682.4},
					{"x":298.2999999999999,"y":676.6999999999999},
					{"x":320.5999999999999,"y":591.4},
					{"x":363.5999999999999,"y":591.4},
					{"x":405.5999999999999,"y":591.4},
					{"x":432.2999999999999,"y":659.4},
					{"x":486.5999999999999,"y":659.4},
					{"x":536.5999999999999,"y":659.4},
					{"x":541.5999999999999,"y":622.4},
					{"x":573.5999999999999,"y":622.4},
					{"x":606.5999999999999,"y":622.4},
					{"x":605.5999999999999,"y":652.4},
					{"x":645.5999999999999,"y":652.4},
					{"x":698.5999999999999,"y":652.4},
					{"x":738.5999999999999,"y":554.4},
					{"x":841.5999999999999,"y":554.4},
					{"x":919.5999999999999,"y":554.4},
					{"x":930.5999999999999,"y":595.4},
					{"x":981.5999999999999,"y":595.4},
					{"x":1032.6,"y":595.4},
					{"x":1054.6,"y":563.4},
					{"x":1097.6,"y":563.4},
					{"x":1140.6,"y":563.4},
					{"x":1146.6,"y":590.4},
					{"x":1189.6,"y":590.4},
					{"x":1252.6,"y":590.4},
					{"x":1270.6,"y":509.4},
					{"x":1338.6,"y":509.4},
					{"x":1388.6,"y":509.4},
					{"x":1392.6,"y":531.4},
					{"x":1429.6,"y":531.4},
					{"x":1516.6,"y":531.4},
					{"x":1540.6,"y":371.4},
					{"x":1622.6,"y":371.4},
					{"x":1681.6,"y":371.4},
					{"x":1680.8,"y":253.5},
					{"x":1766.3999999999999,"y":235.4},
					{"x":1858.6,"y":215.9},
					{"x":1870.9999999999998,"y":154.4},
					{"x":1916.3999999999999,"y":109.10000000000001},
					{"x":1961.8,"y":63.800000000000004},
					{"x":2001.6,"y":65.4},
					{"x":2001.6,"y":65.4}];

				gsap.from('#Features-SVG', {
					opacity: 0,
					duration: 2
				});
				gsap.from('.Features-dot', {
					opacity: 0
				});


				function dotMotion() {
					forEach(document.querySelectorAll('.Features-dot'), (index, value) => {
						const tl = gsap.timeline({
							repeat: -1,
							delay: (index + randomIntFromInterval(1, 3))
						});
						tl
							.to(value,  {
								opacity: 1,
								duration: 1
							})
							.to(value,  {
								duration: 20,
								motionPath: {
									path: graphPath,
									type: 'cubic'
								},
							})
							.to(value,  {
								duration: 1,
								delay: 19,
								opacity: 0
							});
					});
				}

				const featuresGraphTimeline = gsap.timeline({
					onStart: dotMotion()
				});

				featuresGraphTimeline
					.staggerFrom('.Features-dropletLineGroup', .5, {
						delay: .5,
						y: '100%'
					}, 0.25, 'droplet-lines')
					.staggerFrom('.Features-dropletLineGroup .Features-blueStroke', .25, {
						delay: 1.75,
						scale: 0,
						opacity: 0,
						transformOrigin: 'center center'
					}, 0.25, 'droplet-lines')
					.from('.Features-gradientGroup1', 1, {
						delay: 2.25,
						opacity: 0
					}, 'droplet-lines')
					.fromTo('.Features-gradientGroup2', .5, {
						opacity: 0,
						y: 96
					}, {
						delay: 2.5,
						opacity: 0.2,
						y: 64
					}, 'droplet-lines');
			}
		}
	}
</script>

<style scoped>
	#Features-SVG {
		max-width: 2000px;
		/*visibility: hidden;*/
		opacity: 1;
	}
	.Features-gradientGroup1 {
		opacity: 0.6;
	}
	.Features-gradientGroup2 {
		opacity: 0.2;
	}
	.Features-bottomGradientShape {
		fill: url(#Features-bottomGradient);
	}
	.Features-innerGradientShape {
		fill: url(#Features-innerGradient);
	}
	.Features-dottedWaveShape {
		fill: none;
		stroke: #00C838;
		stroke-width: 1.5;
		stroke-linecap: round;
		stroke-miterlimit: 10;
		stroke-dasharray: 0,5;
	}
	.Features-blueStroke {
		fill: none;
		stroke: #00C838;
		stroke-linecap: round;
		stroke-miterlimit: 10;
	}
	.Features-dropletLine {
		fill: none;
		stroke: url(#Features-dropletLineGradient);
		stroke-width: 1.5;
		stroke-linecap: round;
		stroke-miterlimit: 10;
		stroke-dasharray: 0,5;
	}
	.Features-whiteWaveLine {
		fill: none;
		stroke: #FFFFFF;
		stroke-width: 16;
		stroke-miterlimit: 10;
	}
	.Features-dot {
		fill: #00C838;
	}
	.Features-rightGradientShape {
		fill: url(#Features-rightGradient);
	}
	.Features-leftGradientShape {
		fill: url(#Features-leftGradient);
	}
</style>
